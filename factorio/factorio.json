{
  "type": "factorio",
  "display": "Factorio",
  "icon": "factorio",
  "data": {
    "ip": {
      "type": "string",
      "value": "0.0.0.0",
      "display": "IP",
      "desc": "What IP to bind the server to",
      "required": true,
      "userEdit": false
    },
    "port": {
      "type": "integer",
      "value": 34197,
      "display": "Port",
      "desc": "What port to bind the server to",
      "required": true,
      "userEdit": false
    },
    "save": {
      "type": "string",
      "value": "saves/default.zip",
      "display": "Save File to Use",
      "desc": "Save File to Use",
      "required": true,
      "userEdit": true
    },
    "server-settings": {
      "type": "string",
      "value": "factorio/data/server-settings.json",
      "display": "Server Settings JSON",
      "desc": "Server Settings File Location",
      "required": true,
      "userEdit": true
    }
  },
  "install": [
    {
      "type": "command",
      "commands": [
        "curl -L -o factorio.tar.xz https://www.factorio.com/get-download/latest/headless/linux64",
        "mkdir factorio",
        "tar --no-same-owner -xvf factorio.tar.xz",
        "cp factorio/data/server-settings.example.json factorio/data/server-settings.json",
        "./factorio/bin/x64/factorio --create saves/default.zip"
      ]
    }
  ],
  "run": {
    "command": "./factorio/bin/x64/factorio --port ${port} --bind ${ip} --start-server ${save} --server-settings ${server-settings}",
    "stop": "/quit",
    "stdin": {
      "type": "stdin"
    },
    "autostart": false,
    "autorecover": false,
    "autorestart": false
  },
  "environment": {
    "type": "host"
  },
  "supportedEnvironments": [
    {
      "type": "host"
    },
    {
      "type": "docker",
      "image": "pufferpanel/ubuntu",
      "portBindings": [
        "0.0.0.0:${port}:${port}/tcp"
      ]
    }
  ],
  "requirements": {
    "os": "linux",
    "arch": "amd64",
    "binaries": [
      "curl",
      "tar",
      "xz"
    ]
  }
}
